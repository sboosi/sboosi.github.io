<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Using https://www.jqueryscript.net/form/multi-image-uploader-bootstrap.html as base for upload-->

    <title>TrueImage - Skin Photo Verifier</title>

    <style>
        .rounded-xlg {
            border-radius: 1rem!important;
        }      
        .footer {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60px; /* Set the fixed height of the footer here */
            line-height: 60px; /* Vertically center the text there */            
        }     
    </style>

  </head>
  <body>      
    <div class="container-fluid">
        <div class="row mt-2">
          <div class="col">
            <img src="smlogo.svg" rounded style="width:90%;" title="TrueImage"></img>        
          </div>
          <div class="col">
            <img src="trueimage.png" rounded style="width:90%;" title="TrueImage"></img>        
          </div>
        </div>        
        <div class="card shadow-lg rounded-xlg mt-4">
            <div class="card-header">
              TrueImage - Skin Photo Verifier
            </div>
            <div class="card-body">
                <div class="card-text">
                    <h5>Welcome <span id="patientNameDiv"></span>! </h5>
                    <p>Upload or take photos, and True Image will tell you whether it is good enough for your doctor to use. 
                    True Image then sends the good photos directly to your doctor. 
                    </p>
                    <p>                                       
                      Some more text or pictures will help this page
                    </p>                      
                </div>                
            </div>
            <div class="card-footer">
              <div class="row mt-2">
                <div class="col text-center">
                  <a href="upload.html" class="btn btn-sm btn-primary">Select Photos</a>
                </div>
              </div>                              
            </div>
        </div>          

    </div>

    <!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>    

    <script>
      $(document).ready(function () {

      });      
      
      FHIR.oauth2.ready(function(smart){
          console.log("Smart Login Successful") ;
          console.log(smart) ;
          console.log("access token:" + smart.state.tokenResponse.access_token) ;

          smart.patient.read().then(function(patient) {
              document.getElementById("patientNameDiv").innerHTML = patient.name[0].text ;
              //document.getElementById("patientDiv").innerHTML = "<pre>" + JSON.stringify(pt, null, 2) + "</pre>" ;
          });            
      });
          
    </script>
  </body>
</html>